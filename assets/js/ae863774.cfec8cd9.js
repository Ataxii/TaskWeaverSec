"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5675],{2929:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var s=n(5893),a=n(1151);const r={},o="Customizing Examples",i={id:"customization/example/example",title:"Customizing Examples",description:"There are two types of examples: (1) planning examples and (2) code interpreter examples.",source:"@site/docs/customization/example/example.md",sourceDirName:"customization/example",slug:"/customization/example/",permalink:"/TaskWeaver/docs/customization/example/",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/TaskWeaver/tree/main/website/docs/customization/example/example.md",tags:[],version:"current",frontMatter:{},sidebar:"documentSidebar",previous:{title:"The Plugin-Only Mode",permalink:"/TaskWeaver/docs/plugin/plugin_only"},next:{title:"Prompt Compression",permalink:"/TaskWeaver/docs/compression"}},h={},l=[{value:"Planning Examples",id:"planning-examples",level:2},{value:"Code Interpreter Examples",id:"code-interpreter-examples",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"customizing-examples",children:"Customizing Examples"}),"\n",(0,s.jsx)(t.p,{children:"There are two types of examples: (1) planning examples and (2) code interpreter examples.\nPlanning examples are used to demonstrate how to use TaskWeaver to plan for a specific task.\nCode generation examples are used to demonstrate how to generate code or orchestrate plugins to perform a specific task."}),"\n",(0,s.jsx)(t.h2,{id:"planning-examples",children:"Planning Examples"}),"\n",(0,s.jsxs)(t.p,{children:["A planning example tells LLMs how to plan for a specific query from the user; talk to the code interpreter;\nreceive the execution result from the code interpreter; and summarize the execution result.\nBefore constructing the planning example, we strongly encourage you to go through the\n",(0,s.jsx)(t.a,{href:"https://github.com/microsoft/TaskWeaver/blob/main/taskweaver/planner/planner_prompt.yaml",children:"planner prompt"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The following is an example of a planning example which contains 4 posts.\nEach post contains a message, a sender, a receiver, and a list of attachments."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'The first post is sent from the user to the planner.\nThe message is "count the rows of /home/data.csv", which is the same as the user query.'}),"\n",(0,s.jsxs)(t.li,{children:['The second post is sent from the planner to the code interpreter.\nThe message is "Please load the data file /home/data.csv and count the rows of the loaded data".\nThe attachment list contains 3 attachments:',"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"The first attachment is the initial plan, which is a markdown string."}),"\n",(0,s.jsx)(t.li,{children:"The second attachment is the plan, which is a markdown string."}),"\n",(0,s.jsx)(t.li,{children:"The third attachment is the current plan step, which is a markdown string."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:'The third post is sent from the code interpreter to the planner.\nThe message is "Load the data file /home/data.csv successfully and there are 100 rows in the data file".'}),"\n",(0,s.jsxs)(t.li,{children:['The fourth post is sent from the planner to the user.\nThe message is "The data file /home/data.csv is loaded and there are 100 rows in the data file".\nThe attachment list contains 3 attachments:',"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"The first attachment is the initial plan, which is the same as the second attachment of the second post."}),"\n",(0,s.jsx)(t.li,{children:"The second attachment is the plan, which is the same as the third attachment of the second post."}),"\n",(0,s.jsx)(t.li,{children:"The third attachment is the current plan step, which is a markdown string."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"enabled: True\nrounds:\n  - user_query: count the rows of /home/data.csv\n    state: created\n    post_list:\n      - message: count the rows of /home/data.csv\n        send_from: User\n        send_to: Planner\n        attachment_list:\n      - message: Please load the data file /home/data.csv and count the rows of the loaded data\n        send_from: Planner\n        send_to: CodeInterpreter\n        attachment_list:\n        - type: init_plan\n          content: |-\n            1. load the data file\n            2. count the rows of the loaded data <sequentially depends on 1>\n            3. report the result to the user <interactively depends on 2>\n        - type: plan\n          content: |-\n            1. instruct CodeInterpreter to load the data file and count the rows of the loaded data\n            2. report the result to the user\n        - type: current_plan_step\n          content: 1. instruct CodeInterpreter to load the data file and count the rows of the loaded data\n      - message: Load the data file /home/data.csv successfully and there are 100 rows in the data file\n        send_from: CodeInterpreter\n        send_to: Planner\n        attachment_list:\n      - message: The data file /home/data.csv is loaded and there are 100 rows in the data file\n        send_from: Planner\n        send_to: User\n        attachment_list:\n          - type: init_plan\n            content: |-\n              1. load the data file\n              2. count the rows of the loaded data <sequentially depends on 1>\n              3. report the result to the user <interactively depends on 2>\n          - type: plan\n            content: |-\n              1. instruct CodeInterpreter to load the data file and count the rows of the loaded data\n              2. report the result to the user\n          - type: current_plan_step\n            content: 2. report the result to the user\n"})}),"\n",(0,s.jsx)(t.h2,{id:"code-interpreter-examples",children:"Code Interpreter Examples"}),"\n",(0,s.jsxs)(t.p,{children:["A code interpreter example tells LLMs how to generate code or orchestrate plugins to perform a specific task.\nThe task is from the planner. Before constructing the code interpreter example, we strongly encourage you to\nread the ",(0,s.jsx)(t.a,{href:"https://github.com/microsoft/TaskWeaver/blob/main/taskweaver/code_interpreter/code_generator/code_generator_prompt.yaml",children:"code generator prompt"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The following is an example of a code interpreter example which contains 2 posts.\nEach post contains a message, a sender, a receiver, and a list of attachments."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'The first post is sent from the planner to the code interpreter.\nThe message is "Please read file /abc/def.txt".'}),"\n",(0,s.jsxs)(t.li,{children:['The second post is sent from the code interpreter to the planner.\nThe message is "read file /abc/def.txt".\nThe attachment list contains 6 attachments:',"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"The first attachment is the thought of the code interpreter, which is a markdown string."}),"\n",(0,s.jsx)(t.li,{children:"The second attachment is the generated code, which is in python."}),"\n",(0,s.jsx)(t.li,{children:"The third attachment is the verification status, which is CORRECT, INCORRECT, or NONE."}),"\n",(0,s.jsx)(t.li,{children:"The fourth attachment is the verification error message, which is a markdown string."}),"\n",(0,s.jsx)(t.li,{children:"The fifth attachment is the execution status, which is SUCCESS, FAILURE, or NONE."}),"\n",(0,s.jsx)(t.li,{children:"The sixth attachment is the execution result, which is a markdown string."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'enabled: True\nrounds:\n  - user_query: read file /abc/def.txt\n    state: finished\n    post_list:\n      - message: read file /abc/def.txt\n        send_from: Planner\n        send_to: CodeInterpreter\n        attachment_list: []\n      - message: I\'m sorry, I cannot find the file /abc/def.txt. An FileNotFoundException has been raised.\n        send_from: CodeInterpreter\n        send_to: Planner\n        attachment_list:\n          - type: thought\n            content: "{ROLE_NAME} will generate a code snippet to read the file /abc/def.txt and present the content to the user."\n          - type: python\n            content: |-\n              file_path = "/abc/def.txt"  \n\n              with open(file_path, "r") as file:  \n                  file_contents = file.read()  \n                  print(file_contents)\n          - type: verification\n            content: CORRECT\n          - type: code_error\n            content: No code error.\n          - type: execution_status\n            content: FAILURE\n          - type: execution_result\n            content: FileNotFoundException, the file /abc/def.txt does not exist.\n'})}),"\n",(0,s.jsxs)(t.p,{children:["In this example, ",(0,s.jsx)(t.code,{children:"verification"})," is about whether the generated code is correct or not.\nWe implemented a module to verify the generated code. If the code is syntactically incorrect,\nor the code violates the constraints, the verification status will be ",(0,s.jsx)(t.code,{children:"INCORRECT"}),"\nand some error messages will be returned.\nA verification of NONE means that the code has not been verified, which means verification has been turned off."]}),"\n",(0,s.jsxs)(t.p,{children:["In this example, ",(0,s.jsx)(t.code,{children:"execution_status"})," is about whether the generated code can be executed successfully or not.\nIf the execution is successful, the execution status will be ",(0,s.jsx)(t.code,{children:"SUCCESS"})," and the execution result will be returned.\nOtherwise, the execution status will be ",(0,s.jsx)(t.code,{children:"FAILURE"})," and some error messages will be returned.\nA execution_status of ",(0,s.jsx)(t.code,{children:"NONE"})," means that the code has not been executed."]})]})}function d(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>o});var s=n(7294);const a={},r=s.createContext(a);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);