"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6486],{5897:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=r(5893),t=r(1151);const o={},a="More about Configurations",i={id:"configurations/configurations_in_detail",title:"More about Configurations",description:"More details about some important configurations",source:"@site/docs/configurations/configurations_in_detail.md",sourceDirName:"configurations",slug:"/configurations/configurations_in_detail",permalink:"/TaskWeaver/docs/configurations/configurations_in_detail",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/TaskWeaver/tree/main/website/docs/configurations/configurations_in_detail.md",tags:[],version:"current",frontMatter:{},sidebar:"documentSidebar",previous:{title:"Configuration File",permalink:"/TaskWeaver/docs/configurations/overview"},next:{title:"Customization",permalink:"/TaskWeaver/docs/customization"}},l={},d=[{value:"Planner Configuration",id:"planner-configuration",level:2},{value:"Session Configration",id:"session-configration",level:2},{value:"Embedding Configration",id:"embedding-configration",level:2}];function _(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"more-about-configurations",children:"More about Configurations"}),"\n",(0,s.jsx)(n.p,{children:"More details about some important configurations"}),"\n",(0,s.jsx)(n.h2,{id:"planner-configuration",children:"Planner Configuration"}),"\n",(0,s.jsx)(n.p,{children:"In TaskWeaver, the Planner is responsible for generating a plan to accomplish the user's task. The plan is a sequence of steps, where each step will be executed by the Code Interpreter.\nTaken the response from the Code Interpreter or new requests from the user as input, the Planner will update the plan and move on to the next step."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"planner.example_base_path"}),":\tThe folder to store planner examples. The default value is ",(0,s.jsx)(n.code,{children:"${AppBaseDir}/planner_examples"}),".\nIf you want to create your own planner examples, you can add them to this folder. More details about ",(0,s.jsx)(n.code,{children:"example"})," can referred to ",(0,s.jsx)(n.a,{href:"/TaskWeaver/docs/customization/example/",children:"example"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"planner.prompt_compression"}),": At times, lengthy conversations with the Planner may exceed the input limitations of the LLM model.\nTo address this issue, we can compress the chat history and send it to the LLM model. The default value for this setting is ",(0,s.jsx)(n.code,{children:"false"}),".\nMore details about ",(0,s.jsx)(n.code,{children:"prompt_compression"})," can be referred to ",(0,s.jsx)(n.a,{href:"../advanced/compression",children:"prompt_compression"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"planner.skip_planning"}),": In certain scenarios, there may be no need to use the Planner to generate complex plans for simple tasks.\nFor instance, if a user wants to count the rows in a data file, the request can be sent directly to the Code Interpreter.\nWhen the majority of user requests involve simple tasks, enabling this option will create a dummy plan that is sent alongside the user request to the Code Interpreter directly, without LLM generation process.\nThe fixed dummy plan is shown in ",(0,s.jsx)(n.a,{href:"https://github.com/microsoft/TaskWeaver/blob/main/taskweaver/planner/dummy_plan.json",children:"dummy_plan.json"}),".\nHere is an chat example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"=========================================================\n _____         _     _       __\n|_   _|_ _ ___| | _ | |     / /__  ____ __   _____  _____\n  | |/ _` / __| |/ /| | /| / / _ \\/ __ `/ | / / _ \\/ ___/\n  | | (_| \\__ \\   < | |/ |/ /  __/ /_/ /| |/ /  __/ /\n  |_|\\__,_|___/_|\\_\\|__/|__/\\___/\\__,_/ |___/\\___/_/\n=========================================================\nTaskWeaver: I am TaskWeaver, an AI assistant. To get started, could you please enter your request?\nHuman: generate 10 random numbers\n>>> [MESSAGE]eparing...           <=\ufffd=>\nPlease process this request: generate 10 random numbers\n>>> [SEND_TO]\nCodeInterpreter\n>>> [INIT_PLAN]\n1. ask Code Interpreter to handle the request; 2. report the result to user <interactively depends on 1>\n>>> [PLAN]\n1. ask Code Interpreter to handle user\\'s request; 2. report the result to user\n>>> [CURRENT_PLAN_STEP]\n1. ask Code Interpreter to handle the request\n>>> [PLANNER->CODEINTERPRETER]\nPlease process this request: generate 10 random numbers\n>>> [PYTHON]Starting...      \nrandom_numbers = np.random.rand(10)\nrandom_numbers\n>>> [VERIFICATION]\nNONE\n>>> [STATUS]Starting...         \nSUCCESS\n>>> [RESULT]\nThe execution of the generated python code above has succeeded\n\nThe result of above Python code after execution is:\narray([0.65294462, 0.26946084, 0.06244879, 0.78520418, 0.87067657,\n       0.24208003, 0.60249788, 0.30921069, 0.83811521, 0.05135891])\n>>> [CODEINTERPRETER->PLANNER]\nThe following python code has been executed:\n```python\nrandom_numbers = np.random.rand(10)\nrandom_numbers\n```\n\nThe execution of the generated python code above has succeeded\n\nThe result of above Python code after execution is:\narray([0.65294462, 0.26946084, 0.06244879, 0.78520418, 0.87067657,\n       0.24208003, 0.60249788, 0.30921069, 0.83811521, 0.05135891])\n>>> [INIT_PLAN]ting...      <=\ufffd=>     \n1. ask Code Interpreter to handle the request; 2. report the result to user <interactively depends on 1>\n>>> [PLAN]\n1. ask Code Interpreter to handle user's request; 2. report the result to user\n>>> [CURRENT_PLAN_STEP]\n2. report the result to user\n>>> [SEND_TO]\nUser\n>>> [MESSAGE]\nThe random numbers are as follows: [0.65294462, 0.26946084, 0.06244879, 0.78520418, 0.87067657, 0.24208003, 0.60249788, 0.30921069, 0.83811521, 0.05135891]\n>>> [PLANNER->USER]\nThe random numbers are as follows: [0.65294462, 0.26946084, 0.06244879, 0.78520418, 0.87067657, 0.24208003, 0.60249788, 0.30921069, 0.83811521, 0.05135891]\nTaskWeaver: The random numbers are as follows: [0.65294462, 0.26946084, 0.06244879, 0.78520418, 0.87067657, 0.24208003, 0.60249788, 0.30921069, 0.83811521, 0.05135891]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"session-configration",children:"Session Configration"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"session"})," is the entrance of TaskWeaver.\nIt is responsible for the communication between the user and TaskWeaver.\nYou can refer to ",(0,s.jsx)(n.a,{href:"/TaskWeaver/docs/usage/library",children:"taskweaver_as_a_lib"})," to see how to setup a TaskWeaver session and start chatting with TaskWeaver."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_internal_chat_round_num"}),": the maximum number of internal chat rounds between Planner and Code Interpreter.\nIf the number of internal chat rounds exceeds this number, the session will be terminated.\nThe default value is ",(0,s.jsx)(n.code,{children:"10"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"code_interpreter_only"}),": allow users to directly communicate with the Code Interpreter.\nIn this mode, users can only send messages to the Code Interpreter and receive messages from the Code Interpreter.\nHere is an example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:" =========================================================\n _____         _     _       __\n|_   _|_ _ ___| | _ | |     / /__  ____ __   _____  _____\n  | |/ _` / __| |/ /| | /| / / _ \\/ __ `/ | / / _ \\/ ___/\n  | | (_| \\__ \\   < | |/ |/ /  __/ /_/ /| |/ /  __/ /\n  |_|\\__,_|___/_|\\_\\|__/|__/\\___/\\__,_/ |___/\\___/_/\n=========================================================\nTaskWeaver: I am TaskWeaver, an AI assistant. To get started, could you please enter your request?\nHuman: generate 10 random numbers\n>>> [PYTHON]Starting... \nimport numpy as np\nrandom_numbers = np.random.rand(10)\nrandom_numbers\n>>> [VERIFICATION]\nNONE\n>>> [STATUS]Starting...         \nSUCCESS\n>>> [RESULT]\nThe execution of the generated python code above has succeeded\n\nThe result of above Python code after execution is:\narray([0.09918602, 0.68732778, 0.44413814, 0.4756623 , 0.48302334,\n       0.8286594 , 0.80994359, 0.35677263, 0.45719317, 0.68240194])\n>>> [CODEINTERPRETER->PLANNER]\nThe following python code has been executed:\n```python\nimport numpy as np\nrandom_numbers = np.random.rand(10)\nrandom_numbers\n```\n\nThe execution of the generated python code above has succeeded\n\nThe result of above Python code after execution is:\narray([0.09918602, 0.68732778, 0.44413814, 0.4756623 , 0.48302334,\n       0.8286594 , 0.80994359, 0.35677263, 0.45719317, 0.68240194])\nTaskWeaver: The following python code has been executed:\n```python\nimport numpy as np\nrandom_numbers = np.random.rand(10)\nrandom_numbers\n```\n\nThe execution of the generated python code above has succeeded\n\nThe result of above Python code after execution is:\narray([0.09918602, 0.68732778, 0.44413814, 0.4756623 , 0.48302334,\n       0.8286594 , 0.80994359, 0.35677263, 0.45719317, 0.68240194])\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"code_gen_mode"}),": code generation mode.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"plugin_only"}),": please refer to ",(0,s.jsx)(n.a,{href:"/TaskWeaver/docs/plugin/plugin_only",children:"plugin_only_mode"})," for more details."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cli_only"}),": allow users to directly communicate with the Command Line Interface (CLI) in natural language.\nCodeInterpreter will generate CLI commands (e.g., bash/powershell), instead of Python code, to fulfill the user's request."]}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1It is better to enable ",(0,s.jsx)(n.code,{children:"code_interpreter_only"})," when ",(0,s.jsx)(n.code,{children:"cli_only"})," mode is enabled.\nHere is an example:"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'=========================================================\n _____         _     _       __\n|_   _|_ _ ___| | _ | |     / /__  ____ __   _____  _____\n  | |/ _` / __| |/ /| | /| / / _ \\/ __ `/ | / / _ \\/ ___/\n  | | (_| \\__ \\   < | |/ |/ /  __/ /_/ /| |/ /  __/ /\n  |_|\\__,_|___/_|\\_\\|__/|__/\\___/\\__,_/ |___/\\___/_/\n=========================================================\n TaskWeaver \u25b6  I am TaskWeaver, an AI assistant. To get started, could you please enter your request?\n    Human   \u25b6  what time is it now\n \u256d\u2500\u2500\u2500< CodeInterpreter] preparing          <=\ufffd=>\n \u251c\u2500\u25ba [thought] This command will display the current date and time in the PowerShell command prompt.\n \u251c\u2500\u25ba [python] powershell -Command "Get-Date"\n \u2570\u2500\u2500\u25cf sending message to Planner\n \u251c\u2500\u2500\u25cf \n \u2502   Tuesday, February 27, 2024 11:05:05 AM\n \u2570\u2500\u2500\u25cf sending message to Planner\n TaskWeaver \u25b6  \nTuesday, February 27, 2024 11:05:05 AM\n'})}),"\n",(0,s.jsx)(n.h2,{id:"embedding-configration",children:"Embedding Configration"}),"\n",(0,s.jsx)(n.p,{children:"In TaskWeaver, we support various embedding models to generate embeddings for auto plugin selection."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"llm.embedding_api_type"}),": The type of the embedding API. We support the following types:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"openai"}),"\n",(0,s.jsx)(n.li,{children:"qwen"}),"\n",(0,s.jsx)(n.li,{children:"ollama"}),"\n",(0,s.jsx)(n.li,{children:"sentence_transformers"}),"\n",(0,s.jsx)(n.li,{children:"glm"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"llm.embedding_model"}),": The embedding model name. The model name should be aligned with ",(0,s.jsx)(n.code,{children:"llm.embedding_api_type"}),".\nWe only list some embedding models we have tested below:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["openai","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"text-embedding-ada-002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["qwen","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"text-embedding-v1"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["ollama","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"llama2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["sentence_transformers","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"all-mpnet-base-v2"}),"\n",(0,s.jsx)(n.li,{children:"multi-qa-mpnet-base-dot-v1"}),"\n",(0,s.jsx)(n.li,{children:"all-distilroberta-v1"}),"\n",(0,s.jsx)(n.li,{children:"all-MiniLM-L12-v2"}),"\n",(0,s.jsx)(n.li,{children:"multi-qa-MiniLM-L6-cos-v1"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["zhipuai","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"embedding-2\nYou also can use other embedding models supported by the above embedding APIs."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(_,{...e})}):_(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>a});var s=r(7294);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);